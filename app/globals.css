@import "tailwindcss";

@theme {
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  /* Define HSL neutrals to avoid Tailwind 4 oklch defaults in PDF export */
  --color-zinc-50: hsl(0 0% 98%);
  --color-zinc-100: hsl(0 0% 96%);
  --color-zinc-200: hsl(0 0% 90%);
  --color-zinc-300: hsl(0 0% 83%);
  --color-zinc-400: hsl(0 0% 64%);
  --color-zinc-500: hsl(0 0% 46%);
  --color-zinc-600: hsl(0 0% 32%);
  --color-zinc-700: hsl(0 0% 25%);
  --color-zinc-800: hsl(0 0% 15%);
  --color-zinc-900: hsl(0 0% 9%);

  /* Define HSL emeralds to prevent PDF crash */
  --color-emerald-50: hsl(152 81% 96%);
  --color-emerald-100: hsl(149 80% 90%);
  --color-emerald-200: hsl(152 76% 80%);
  --color-emerald-300: hsl(156 72% 67%);
  --color-emerald-400: hsl(158 64% 52%);
  --color-emerald-500: hsl(160 84% 39%);
  --color-emerald-600: hsl(161 94% 30%);
  --color-emerald-700: hsl(163 94% 24%);
  --color-emerald-800: hsl(163 88% 20%);
  --color-emerald-900: hsl(164 86% 16%);
  --color-emerald-950: hsl(166 91% 9%);

  --radius-lg: 12px;
  --radius-md: 8px;
  --radius-sm: 4px;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 0%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 0%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 0%;

    --primary: 0 0% 0%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 100%;
    --secondary-foreground: 0 0% 0%;

    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;

    --accent: 0 0% 94%;
    --accent-foreground: 0 0% 0%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 0%;
    --input: 0 0% 90%;
    --ring: 0 0% 0%;
  }

  .dark {
    --background: 224 71% 4%;
    --foreground: 210 40% 98%;
    --border: 0 0% 100%;
    --card: 224 71% 4%;
    --card-foreground: 210 40% 98%;
    --primary: 0 0% 100%;
    --primary-foreground: 0 0% 0%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html,
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    -webkit-font-smoothing: antialiased;
    font-family: var(--font-sans), system-ui, sans-serif;
    /* Reduce base size on small mobile to fixed 'oversized' feel */
    font-size: clamp(13px, 3.5vw, 16px);
    line-height: 1.5;
    /* Prevent WebView zoom on double tap/focus while maintaining readability */
    touch-action: manipulation;
    /* Safe area handling is now moved to SafeAreaContainer component */
    overflow-x: hidden;
    overflow-x: hidden;
  }

  h1,
  h2,
  h3,
  h4 {
    font-family: var(--font-serif), serif;
    font-weight: 700;
    color: hsl(var(--foreground));
  }

  svg {
    color: currentColor;
    stroke: currentColor;
    fill: none;
    transition: all 0.2s ease;
  }
}

/* 
   PREMIUM CLINICAL DESIGN SYSTEM 
*/

/* Buttons - DYNAMIC THEMING ENABLED */
button,
.btn {
  @apply rounded-xl font-bold transition-all duration-200 outline-none select-none;
}

/* MANDATORY BUTTON COLORS: Now reacts to Accent Color Settings */
@utility btn-premium {
  @apply bg-primary text-primary-foreground border border-black/10 shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2;
  opacity: 1 !important;
}

button:hover:not(.bg-primary):not(.btn-premium) {
  @apply bg-muted;
}

button:active:not(.bg-primary):not(.btn-premium) {
  @apply opacity-70 scale-95;
}

.bg-primary {
  @apply border border-black/10 shadow-sm transition-all;
  background-color: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
}

.bg-primary:hover {
  @apply shadow-lg;
}

.bg-primary:active {
  @apply scale-95;
}

/* Icon Containers */
@utility icon-square {
  @apply h-11 w-11 rounded-xl flex items-center justify-center border border-black bg-white text-black shrink-0 transition-all;

  .dark & {
    @apply border-border bg-card text-white;
  }
}

/* Input Fields - FIX OVERLAY ISSUES */
@utility input-premium {
  @apply w-full h-12 px-5 rounded-xl border border-black bg-white text-foreground font-bold outline-none transition-all placeholder:text-muted-foreground focus:ring-1 focus:ring-black;

  .dark & {
    @apply border-border bg-card focus:ring-white;
  }
}

@utility search-container {
  @apply relative flex items-center w-full;
}

@utility search-icon {
  @apply absolute left-4 h-5 w-5 text-black pointer-events-none z-10;

  .dark & {
    @apply text-white;
  }
}

@utility search-input {
  @apply input-premium pl-12;
}

/* Active State for Navigation (No solid black) */
@utility nav-item-active {
  @apply bg-muted;
  border-bottom: 2px solid black !important;
  border-radius: 0 !important;

  .dark & {
    border-bottom: 2px solid white !important;
  }
}

/* Surfaces */
@utility surface {
  @apply rounded-xl border border-black bg-white shadow-sm;

  .dark & {
    @apply border-border bg-card shadow-none;
  }
}

/* Surface with containment for scrolling list performance */
@utility surface-contained {
  @apply rounded-xl border border-black bg-white shadow-sm;
  contain: layout style paint;

  .dark & {
    @apply border-border bg-card shadow-none;
  }
}


/* Mobile Close Button (X) */
@utility mobile-close-btn {
  @apply h-12 w-12 flex items-center justify-center rounded-xl border border-black bg-white text-black shadow-lg z-[100] active:scale-75 transition-all;

  .dark & {
    @apply border-border bg-card text-white;
  }
}

@utility safe-top {
  padding-top: env(safe-area-inset-top, 0px);
}

@utility safe-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* 
   PRINT/PDF OPTIMIZATION 
*/
@media print {
  body {
    background: white !important;
    color: black !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .no-print {
    display: none !important;
  }

  .printable-record {
    display: block !important;
    position: static !important;
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
  }

  /* Force hide app-shell elements during print */
  nav,
  .mobile-nav,
  header,
  footer,
  .btn-premium,
  .glass {
    display: none !important;
  }

  @page {
    margin: 20mm;
  }

  /* Reset margins for printing */
  main {
    margin: 0 !important;
    padding: 0 !important;
    max-width: 100% !important;
  }
}

.printable-record {
  display: none;
}